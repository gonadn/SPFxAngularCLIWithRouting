{"version":3,"file":"Async.js","sourceRoot":"../src/","sources":["Async.ts"],"names":[],"mappings":"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","sourcesContent":["declare function setTimeout(cb: Function, delay: number): number;\r\ndeclare function setInterval(cb: Function, delay: number): number;\r\n\r\n/**\r\n * Bugs often appear in async code when stuff gets disposed, but async operations don't get canceled.\r\n * This Async helper class solves these issues by tying async code to the lifetime of a disposable object.\r\n *\r\n * Usage: Anything class extending from BaseModel can access this helper via this.async. Otherwise create a\r\n * new instance of the class and remember to call dispose() during your code's dispose handler.\r\n *\r\n * @public\r\n */\r\nexport class Async {\r\n  private _timeoutIds: { [id: number]: boolean } | null = null;\r\n  private _immediateIds: { [id: number]: boolean } | null = null;\r\n  private _intervalIds: { [id: number]: boolean } | null = null;\r\n  private _animationFrameIds: { [id: number]: boolean } | null = null;\r\n  private _isDisposed: boolean;\r\n  private _parent: React.ReactNode | null;\r\n  // tslint:disable-next-line:no-any\r\n  private _onErrorHandler: ((e: any) => void) | undefined;\r\n  private _noop: () => void;\r\n  // tslint:disable-next-line:no-any\r\n  constructor(parent?: React.ReactNode, onError?: (e: any) => void) {\r\n    this._isDisposed = false;\r\n    this._parent = parent || null;\r\n    this._onErrorHandler = onError;\r\n    this._noop = () => { /* do nothing */ };\r\n  }\r\n\r\n  /**\r\n   * Dispose function, clears all async operations.\r\n   */\r\n  public dispose(): void {\r\n    let id;\r\n\r\n    this._isDisposed = true;\r\n    this._parent = null;\r\n\r\n    // Clear timeouts.\r\n    if (this._timeoutIds) {\r\n      for (id in this._timeoutIds) {\r\n        if (this._timeoutIds.hasOwnProperty(id)) {\r\n          this.clearTimeout(parseInt(id, 10));\r\n        }\r\n      }\r\n\r\n      this._timeoutIds = null;\r\n    }\r\n\r\n    // Clear immediates.\r\n    if (this._immediateIds) {\r\n      for (id in this._immediateIds) {\r\n        if (this._immediateIds.hasOwnProperty(id)) {\r\n          this.clearImmediate(parseInt(id, 10));\r\n        }\r\n      }\r\n\r\n      this._immediateIds = null;\r\n    }\r\n\r\n    // Clear intervals.\r\n    if (this._intervalIds) {\r\n      for (id in this._intervalIds) {\r\n        if (this._intervalIds.hasOwnProperty(id)) {\r\n          this.clearInterval(parseInt(id, 10));\r\n        }\r\n      }\r\n      this._intervalIds = null;\r\n    }\r\n\r\n    // Clear animation frames.\r\n    if (this._animationFrameIds) {\r\n      for (id in this._animationFrameIds) {\r\n        if (this._animationFrameIds.hasOwnProperty(id)) {\r\n          this.cancelAnimationFrame(parseInt(id, 10));\r\n        }\r\n      }\r\n\r\n      this._animationFrameIds = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * SetTimeout override, which will auto cancel the timeout during dispose.\r\n   * @param callback - Callback to execute.\r\n   * @param duration - Duration in milliseconds.\r\n   * @returns The setTimeout id.\r\n   */\r\n  public setTimeout(callback: () => void, duration: number): number {\r\n\r\n    let timeoutId = 0;\r\n\r\n    if (!this._isDisposed) {\r\n      if (!this._timeoutIds) {\r\n        this._timeoutIds = {};\r\n      }\r\n\r\n      /* tslint:disable:ban-native-functions */\r\n      timeoutId = setTimeout(\r\n        () => {\r\n          // Time to execute the timeout, enqueue it as a foreground task to be executed.\r\n\r\n          try {\r\n            // Now delete the record and call the callback.\r\n            if (this._timeoutIds) {\r\n              delete this._timeoutIds[timeoutId];\r\n            }\r\n            callback.apply(this._parent);\r\n          } catch (e) {\r\n            if (this._onErrorHandler) {\r\n              this._onErrorHandler(e);\r\n            }\r\n          }\r\n        },\r\n        duration);\r\n      /* tslint:enable:ban-native-functions */\r\n\r\n      this._timeoutIds[timeoutId] = true;\r\n    }\r\n\r\n    return timeoutId;\r\n  }\r\n\r\n  /**\r\n   * Clears the timeout.\r\n   * @param id - Id to cancel.\r\n   */\r\n  public clearTimeout(id: number): void {\r\n\r\n    if (this._timeoutIds && this._timeoutIds[id]) {\r\n      /* tslint:disable:ban-native-functions */\r\n      clearTimeout(id);\r\n      delete this._timeoutIds[id];\r\n      /* tslint:enable:ban-native-functions */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * SetImmediate override, which will auto cancel the immediate during dispose.\r\n   * @param callback - Callback to execute.\r\n   * @returns The setTimeout id.\r\n   */\r\n  public setImmediate(callback: () => void): number {\r\n\r\n    let immediateId = 0;\r\n\r\n    if (!this._isDisposed) {\r\n      if (!this._immediateIds) {\r\n        this._immediateIds = {};\r\n      }\r\n\r\n      /* tslint:disable:ban-native-functions */\r\n      let setImmediateCallback = () => {\r\n        // Time to execute the timeout, enqueue it as a foreground task to be executed.\r\n\r\n        try {\r\n          // Now delete the record and call the callback.\r\n          if (this._immediateIds) {\r\n            delete this._immediateIds[immediateId];\r\n          }\r\n          callback.apply(this._parent);\r\n        } catch (e) {\r\n          this._logError(e);\r\n        }\r\n      };\r\n\r\n      immediateId = window.setImmediate ? window.setImmediate(setImmediateCallback) : window.setTimeout(setImmediateCallback, 0);\r\n      /* tslint:enable:ban-native-functions */\r\n\r\n      this._immediateIds[immediateId] = true;\r\n    }\r\n\r\n    return immediateId;\r\n  }\r\n\r\n  /**\r\n   * Clears the immediate.\r\n   * @param id - Id to cancel.\r\n   */\r\n  public clearImmediate(id: number): void {\r\n\r\n    if (this._immediateIds && this._immediateIds[id]) {\r\n      /* tslint:disable:ban-native-functions */\r\n      window.clearImmediate ? window.clearImmediate(id) : window.clearTimeout(id);\r\n      delete this._immediateIds[id];\r\n      /* tslint:enable:ban-native-functions */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * SetInterval override, which will auto cancel the timeout during dispose.\r\n   * @param callback - Callback to execute.\r\n   * @param duration - Duration in milliseconds.\r\n   * @returns The setTimeout id.\r\n   */\r\n  public setInterval(callback: () => void, duration: number): number {\r\n    let intervalId = 0;\r\n\r\n    if (!this._isDisposed) {\r\n      if (!this._intervalIds) {\r\n        this._intervalIds = {};\r\n      }\r\n\r\n      /* tslint:disable:ban-native-functions */\r\n      intervalId = setInterval(\r\n        () => {\r\n          // Time to execute the interval callback, enqueue it as a foreground task to be executed.\r\n          try {\r\n            callback.apply(this._parent);\r\n          } catch (e) {\r\n            this._logError(e);\r\n          }\r\n        },\r\n        duration);\r\n      /* tslint:enable:ban-native-functions */\r\n\r\n      this._intervalIds[intervalId] = true;\r\n    }\r\n\r\n    return intervalId;\r\n  }\r\n\r\n  /**\r\n   * Clears the interval.\r\n   * @param id - Id to cancel.\r\n   */\r\n  public clearInterval(id: number): void {\r\n    if (this._intervalIds && this._intervalIds[id]) {\r\n      /* tslint:disable:ban-native-functions */\r\n      clearInterval(id);\r\n      delete this._intervalIds[id];\r\n      /* tslint:enable:ban-native-functions */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a function that, when executed, will only call the func function at most once per\r\n   * every wait milliseconds. Provide an options object to indicate that func should be invoked\r\n   * on the leading and/or trailing edge of the wait timeout. Subsequent calls to the throttled\r\n   * function will return the result of the last func call.\r\n   *\r\n   * Note: If leading and trailing options are true func will be called on the trailing edge of\r\n   * the timeout only if the the throttled function is invoked more than once during the wait timeout.\r\n   *\r\n   * @param func - The function to throttle.\r\n   * @param wait - The number of milliseconds to throttle executions to. Defaults to 0.\r\n   * @param options - The options object.\r\n   * @returns The new throttled function.\r\n   */\r\n  public throttle<T extends Function>(func: T, wait?: number, options?: {\r\n    leading?: boolean;\r\n    trailing?: boolean;\r\n  }): T | (() => void) {\r\n\r\n    if (this._isDisposed) {\r\n      return this._noop;\r\n    }\r\n\r\n    let waitMS = wait || 0;\r\n    let leading = true;\r\n    let trailing = true;\r\n    let lastExecuteTime = 0;\r\n    let lastResult: T;\r\n    // tslint:disable-next-line:no-any\r\n    let lastArgs: any[];\r\n    let timeoutId: number | null = null;\r\n\r\n    if (options && typeof (options.leading) === 'boolean') {\r\n      leading = options.leading;\r\n    }\r\n\r\n    if (options && typeof (options.trailing) === 'boolean') {\r\n      trailing = options.trailing;\r\n    }\r\n\r\n    let callback = (userCall?: boolean) => {\r\n      let now = (new Date).getTime();\r\n      let delta = now - lastExecuteTime;\r\n      let waitLength = leading ? waitMS - delta : waitMS;\r\n      if (delta >= waitMS && (!userCall || leading)) {\r\n        lastExecuteTime = now;\r\n        if (timeoutId) {\r\n          this.clearTimeout(timeoutId);\r\n          timeoutId = null;\r\n        }\r\n        lastResult = func.apply(this._parent, lastArgs);\r\n      } else if (timeoutId === null && trailing) {\r\n        timeoutId = this.setTimeout(callback, waitLength);\r\n      }\r\n\r\n      return lastResult;\r\n    };\r\n\r\n    // tslint:disable-next-line:no-any\r\n    let resultFunction: () => T = (...args: any[]) => {\r\n      lastArgs = args;\r\n      return callback(true);\r\n    };\r\n\r\n    return resultFunction;\r\n  }\r\n\r\n  /**\r\n   * Creates a function that will delay the execution of func until after wait milliseconds have\r\n   * elapsed since the last time it was invoked. Provide an options object to indicate that func\r\n   * should be invoked on the leading and/or trailing edge of the wait timeout. Subsequent calls\r\n   * to the debounced function will return the result of the last func call.\r\n   *\r\n   * Note: If leading and trailing options are true func will be called on the trailing edge of\r\n   * the timeout only if the the debounced function is invoked more than once during the wait\r\n   * timeout.\r\n   *\r\n   * @param func - The function to debounce.\r\n   * @param wait - The number of milliseconds to delay.\r\n   * @param options - The options object.\r\n   * @returns The new debounced function.\r\n   */\r\n  public debounce<T extends Function>(func: T, wait?: number, options?: {\r\n    leading?: boolean;\r\n    maxWait?: number;\r\n    trailing?: boolean;\r\n  }): ICancelable<T> & (() => void) {\r\n\r\n    if (this._isDisposed) {\r\n      let noOpFunction: ICancelable<T> & (() => T) = (() => {\r\n        /** Do nothing */\r\n      }) as ICancelable<T> & (() => T);\r\n\r\n      noOpFunction.cancel = () => { return; };\r\n      /* tslint:disable:no-any */\r\n      noOpFunction.flush = (() => null) as any;\r\n      /* tslint:enable:no-any */\r\n      noOpFunction.pending = () => false;\r\n\r\n      return noOpFunction;\r\n    }\r\n\r\n    let waitMS = wait || 0;\r\n    let leading = false;\r\n    let trailing = true;\r\n    let maxWait: number | null = null;\r\n    let lastCallTime = 0;\r\n    let lastExecuteTime = (new Date).getTime();\r\n    let lastResult: T;\r\n    // tslint:disable-next-line:no-any\r\n    let lastArgs: any[];\r\n    let timeoutId: number | null = null;\r\n\r\n    if (options && typeof (options.leading) === 'boolean') {\r\n      leading = options.leading;\r\n    }\r\n\r\n    if (options && typeof (options.trailing) === 'boolean') {\r\n      trailing = options.trailing;\r\n    }\r\n\r\n    if (options && typeof (options.maxWait) === 'number' && !isNaN(options.maxWait)) {\r\n      maxWait = options.maxWait;\r\n    }\r\n\r\n    let markExecuted = (time: number) => {\r\n      if (timeoutId) {\r\n        this.clearTimeout(timeoutId);\r\n        timeoutId = null;\r\n      }\r\n      lastExecuteTime = time;\r\n    };\r\n\r\n    let invokeFunction = (time: number) => {\r\n      markExecuted(time);\r\n      lastResult = func.apply(this._parent, lastArgs);\r\n    };\r\n\r\n    let callback = (userCall?: boolean) => {\r\n      let now = (new Date).getTime();\r\n      let executeImmediately = false;\r\n      if (userCall) {\r\n        if (leading && now - lastCallTime >= waitMS) {\r\n          executeImmediately = true;\r\n        }\r\n        lastCallTime = now;\r\n      }\r\n      let delta = now - lastCallTime;\r\n      let waitLength = waitMS - delta;\r\n      let maxWaitDelta = now - lastExecuteTime;\r\n      let maxWaitExpired = false;\r\n\r\n      if (maxWait !== null) {\r\n        // maxWait only matters when there is a pending callback\r\n        if (maxWaitDelta >= maxWait && timeoutId) {\r\n          maxWaitExpired = true;\r\n        } else {\r\n          waitLength = Math.min(waitLength, maxWait - maxWaitDelta);\r\n        }\r\n      }\r\n\r\n      if (delta >= waitMS || maxWaitExpired || executeImmediately) {\r\n        invokeFunction(now);\r\n      } else if ((timeoutId === null || !userCall) && trailing) {\r\n        timeoutId = this.setTimeout(callback, waitLength);\r\n      }\r\n\r\n      return lastResult;\r\n    };\r\n\r\n    let pending = (): boolean => {\r\n      return !!timeoutId;\r\n    };\r\n\r\n    let cancel = (): void => {\r\n      if (pending()) {\r\n        // Mark the debounced function as having executed\r\n        markExecuted(new Date().getTime());\r\n      }\r\n    };\r\n\r\n    let flush = (): T => {\r\n      if (pending()) {\r\n        invokeFunction(new Date().getTime());\r\n      }\r\n\r\n      return lastResult;\r\n    };\r\n\r\n    // tslint:disable-next-line:no-any\r\n    let resultFunction: ICancelable<T> & (() => T) = ((...args: any[]) => {\r\n      lastArgs = args;\r\n      return callback(true);\r\n    }) as ICancelable<T> & (() => T);\r\n\r\n    resultFunction.cancel = cancel;\r\n    resultFunction.flush = flush;\r\n    resultFunction.pending = pending;\r\n\r\n    return resultFunction;\r\n  }\r\n\r\n  public requestAnimationFrame(callback: () => void): number {\r\n    let animationFrameId = 0;\r\n\r\n    if (!this._isDisposed) {\r\n      if (!this._animationFrameIds) {\r\n        this._animationFrameIds = {};\r\n      }\r\n\r\n      /* tslint:disable:ban-native-functions */\r\n      let animationFrameCallback = () => {\r\n        try {\r\n          // Now delete the record and call the callback.\r\n          if (this._animationFrameIds) {\r\n            delete this._animationFrameIds[animationFrameId];\r\n          }\r\n\r\n          callback.apply(this._parent);\r\n        } catch (e) {\r\n          this._logError(e);\r\n        }\r\n      };\r\n\r\n      animationFrameId = window.requestAnimationFrame ?\r\n        window.requestAnimationFrame(animationFrameCallback) :\r\n        window.setTimeout(animationFrameCallback, 0);\r\n      /* tslint:enable:ban-native-functions */\r\n\r\n      this._animationFrameIds[animationFrameId] = true;\r\n    }\r\n\r\n    return animationFrameId;\r\n  }\r\n\r\n  public cancelAnimationFrame(id: number): void {\r\n    if (this._animationFrameIds && this._animationFrameIds[id]) {\r\n      /* tslint:disable:ban-native-functions */\r\n      window.cancelAnimationFrame ? window.cancelAnimationFrame(id) : window.clearTimeout(id);\r\n      /* tslint:enable:ban-native-functions */\r\n      delete this._animationFrameIds[id];\r\n    }\r\n  }\r\n\r\n  // tslint:disable-next-line:no-any\r\n  protected _logError(e: any): void {\r\n    if (this._onErrorHandler) {\r\n      this._onErrorHandler(e);\r\n    }\r\n  }\r\n}\r\n\r\nexport type ICancelable<T> = {\r\n  flush: () => T;\r\n  cancel: () => void;\r\n  pending: () => boolean;\r\n};"]}