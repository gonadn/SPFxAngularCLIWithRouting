"use strict";
// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.
// See LICENSE in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
const LinkManager_1 = require("../utilities/LinkManager");
const BaseRushAction_1 = require("./BaseRushAction");
class LinkAction extends BaseRushAction_1.BaseRushAction {
    constructor(parser) {
        super({
            actionVerb: 'link',
            summary: 'Create node_modules symlinks for all projects',
            documentation: 'Create node_modules symlinks for all projects'
        });
        this._parser = parser;
    }
    onDefineParameters() {
        this._force = this.defineFlagParameter({
            parameterLongName: '--force',
            parameterShortName: '-f',
            description: 'Deletes and recreates all links, even if the filesystem state seems to indicate that this is ' +
                'unnecessary.'
        });
    }
    run() {
        const linkManager = new LinkManager_1.default(this.rushConfiguration);
        this._parser.catchSyncErrors(linkManager.createSymlinksForProjects(this._force.value));
    }
}
exports.default = LinkAction;

//# sourceMappingURL=LinkAction.js.map
